
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Teacher Dashboard</title>
  <style>
    body {
      font-family: sans-serif;
      background: #f0f8ff;
      color: #333;
      margin: 0;
      padding: 20px;
    }
    h1 {
      text-align: center;
    }
    .tabs {
      display: flex;
      justify-content: center;
      gap: 20px;
      margin: 20px 0;
    }
    .tab-button {
      background: #d6ecff;
      padding: 10px 16px;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      font-weight: bold;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }
    .tab-button:hover {
      background: #c0e0ff;
    }
    .section {
      display: none;
    }
    .section.active {
      display: block;
    }
    .zone-counts {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
      gap: 15px;
      margin-top: 20px;
    }
    .zone-card {
      background: #fff;
      padding: 16px;
      border-radius: 10px;
      box-shadow: 0 2px 6px rgba(0,0,0,0.1);
    }
    .zone-card h3 {
      margin: 0 0 10px 0;
    }
    .student-log {
      margin-top: 20px;
    }
    select, textarea {
      padding: 6px;
      font-size: 16px;
      margin-top: 10px;
    }
  </style>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>

<body>
  <div style="position: fixed; top: 10px; right: 10px; z-index: 1000;">
    <a href="zones.html" style="background-color: #d6ecff; padding: 8px 12px; border-radius: 8px;
    text-decoration: none; color: #333; font-weight: bold; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
      ğŸ§â€â™‚ï¸ Back to Zones
    </a>
  </div>

  <h1>ğŸ“Š Teacher Dashboard</h1>

  <div class="tabs">
    <button class="tab-button" onclick="switchTab('daily')">ğŸ—“ï¸ Daily Summary</button>
    <button class="tab-button" onclick="switchTab('student')">ğŸ§‘â€ğŸ“ Student Logs</button>
    <button class="tab-button" onclick="switchTab('class')">ğŸ« Class Manager</button>
  </div>

  <div id="daily" class="section active">
    
<div style="margin-bottom: 15px;">
  <label for="classSelect">Select Class:</label>
  <select id="classSelect" onchange="switchClass()"></select>
  <input type="text" id="newClassName" placeholder="New class name" />
  <button onclick="addNewClass()">â• Add Class</button>
</div>
<h2>ğŸ—“ï¸ Zone Summary by Day</h2>
    
    <canvas id="dailyChart" height="150"></canvas>
    
    <button onclick="exportCSV()">ğŸ“¤ Export All Logs (CSV)</button>
    <canvas id="dailyChart" height="150"></canvas>
    <div id="dailySummary" class="zone-counts"></div>
    
    
  </div>

  <div id="student" class="section">
    <h2>ğŸ§‘â€ğŸ“ Student Emotional History</h2>
    <select id="studentSelect" onchange="renderStudentLog()"></select>
    
    <canvas id="studentChart" height="150"></canvas>
    
    <button onclick="exportStudentCSV()">ğŸ“¤ Export Student Log (CSV)</button>
    <canvas id="studentChart" height="150"></canvas>
    <div id="studentLog" class="student-log"></div>
    
    
  </div>

  <div id="class" class="section">
    <h2>ğŸ« Class Management</h2>
    <p>Paste or type a list of student names (one per line):</p>
    <textarea id="studentInput" rows="10" cols="30"></textarea><br>
    <button onclick="saveClass()">Save Class</button>
  </div>

  <script>
    function switchTab(tabId) {
      document.querySelectorAll('.section').forEach(s => s.classList.remove('active'));
      document.getElementById(tabId).classList.add('active');
    }

    
    const demoLog = [
        { date: '2025-03-11', name: 'Alice', zone: 'green' },
        { date: '2025-03-11', name: 'Ben', zone: 'red' },
        { date: '2025-03-11', name: 'Charlie', zone: 'green' },
        { date: '2025-03-11', name: 'Daisy', zone: 'red' },
        { date: '2025-03-11', name: 'Eli', zone: 'green' },
        { date: '2025-03-12', name: 'Alice', zone: 'yellow' },
        { date: '2025-03-12', name: 'Ben', zone: 'green' },
        { date: '2025-03-12', name: 'Charlie', zone: 'green' },
        { date: '2025-03-12', name: 'Daisy', zone: 'blue' },
        { date: '2025-03-12', name: 'Eli', zone: 'green' },
        { date: '2025-03-13', name: 'Alice', zone: 'green' },
        { date: '2025-03-13', name: 'Ben', zone: 'yellow' },
        { date: '2025-03-13', name: 'Charlie', zone: 'red' },
        { date: '2025-03-13', name: 'Daisy', zone: 'green' },
        { date: '2025-03-13', name: 'Eli', zone: 'yellow' },
        { date: '2025-03-14', name: 'Alice', zone: 'green' },
        { date: '2025-03-14', name: 'Ben', zone: 'green' },
        { date: '2025-03-14', name: 'Charlie', zone: 'yellow' },
        { date: '2025-03-14', name: 'Daisy', zone: 'yellow' },
        { date: '2025-03-14', name: 'Eli', zone: 'green' },
        { date: '2025-03-17', name: 'Alice', zone: 'blue' },
        { date: '2025-03-17', name: 'Ben', zone: 'green' },
        { date: '2025-03-17', name: 'Charlie', zone: 'green' },
        { date: '2025-03-17', name: 'Daisy', zone: 'yellow' },
        { date: '2025-03-17', name: 'Eli', zone: 'green' },
        { date: '2025-03-18', name: 'Alice', zone: 'yellow' },
        { date: '2025-03-18', name: 'Ben', zone: 'yellow' },
        { date: '2025-03-18', name: 'Charlie', zone: 'green' },
        { date: '2025-03-18', name: 'Daisy', zone: 'green' },
        { date: '2025-03-18', name: 'Eli', zone: 'green' },
        { date: '2025-03-19', name: 'Alice', zone: 'red' },
        { date: '2025-03-19', name: 'Ben', zone: 'yellow' },
        { date: '2025-03-19', name: 'Charlie', zone: 'green' },
        { date: '2025-03-19', name: 'Daisy', zone: 'green' },
        { date: '2025-03-19', name: 'Eli', zone: 'green' },
        { date: '2025-03-20', name: 'Alice', zone: 'green' },
        { date: '2025-03-20', name: 'Ben', zone: 'blue' },
        { date: '2025-03-20', name: 'Charlie', zone: 'green' },
        { date: '2025-03-20', name: 'Daisy', zone: 'yellow' },
        { date: '2025-03-20', name: 'Eli', zone: 'green' },
    ];

    function getLog() {
      const stored = localStorage.getItem("zoneLog-DefaultClass");
      return stored ? JSON.parse(stored) : demoLog;
      return JSON.parse(localStorage.getItem("zoneLog-DefaultClass") || "[]");
    }

    function renderDailySummary() {
      const log = getLog();
      const summary = {};
      log.forEach(entry => {
        if (!summary[entry.date]) summary[entry.date] = { blue: 0, green: 0, yellow: 0, red: 0 };
        summary[entry.date][entry.zone]++;
      });

      const container = document.getElementById("dailySummary");
      container.innerHTML = "";
      Object.entries(summary).forEach(([date, zones]) => {
        const card = document.createElement("div");
        card.className = "zone-card";
        card.innerHTML = `
          <h3>${date}</h3>
          ğŸ”µ Blue: ${zones.blue}<br>
          ğŸŸ¢ Green: ${zones.green}<br>
          ğŸŸ¡ Yellow: ${zones.yellow}<br>
          ğŸ”´ Red: ${zones.red}
        `;
        container.appendChild(card);
      });
    }

    function renderStudentOptions() {
      const log = getLog();
      const studentSet = new Set(log.map(entry => entry.name));
      const select = document.getElementById("studentSelect");
      select.innerHTML = "<option value=''>Select a student</option>";
      [...studentSet].sort().forEach(name => {
        const option = document.createElement("option");
        option.value = name;
        option.textContent = name;
        select.appendChild(option);
      });
    }

    function renderStudentLog() {
      const name = document.getElementById("studentSelect").value;
      const log = getLog().filter(entry => entry.name === name);
      const grouped = {};
      log.forEach(entry => {
        if (!grouped[entry.date]) grouped[entry.date] = [];
        grouped[entry.date].push(entry.zone);
      });
      const display = document.getElementById("studentLog");
      display.innerHTML = "";
      Object.entries(grouped).forEach(([date, zones]) => {
        const line = document.createElement("p");
        line.textContent = `${date}: ${zones.join(", ")}`;
        display.appendChild(line);
      });
    }

    function saveClass() {
      const names = document.getElementById("studentInput").value.trim().split(/\r?\n/).filter(Boolean);
      alert("Class saved! (This version does not yet store class data persistently)");
    }

    renderDailySummary();
    renderStudentOptions();
  </script>

<script>
const demoLog = [
  { date: '2025-03-11', name: 'Alice', zone: 'green' },
  { date: '2025-03-11', name: 'Ben', zone: 'red' },
  { date: '2025-03-11', name: 'Charlie', zone: 'green' },
  { date: '2025-03-11', name: 'Daisy', zone: 'red' },
  { date: '2025-03-11', name: 'Eli', zone: 'green' },
  { date: '2025-03-12', name: 'Alice', zone: 'yellow' },
  { date: '2025-03-12', name: 'Ben', zone: 'green' },
  { date: '2025-03-12', name: 'Charlie', zone: 'green' },
  { date: '2025-03-12', name: 'Daisy', zone: 'blue' },
  { date: '2025-03-12', name: 'Eli', zone: 'green' },
  { date: '2025-03-13', name: 'Alice', zone: 'green' },
  { date: '2025-03-13', name: 'Ben', zone: 'yellow' },
  { date: '2025-03-13', name: 'Charlie', zone: 'red' },
  { date: '2025-03-13', name: 'Daisy', zone: 'green' },
  { date: '2025-03-13', name: 'Eli', zone: 'yellow' },
  { date: '2025-03-14', name: 'Alice', zone: 'green' },
  { date: '2025-03-14', name: 'Ben', zone: 'green' },
  { date: '2025-03-14', name: 'Charlie', zone: 'yellow' },
  { date: '2025-03-14', name: 'Daisy', zone: 'yellow' },
  { date: '2025-03-14', name: 'Eli', zone: 'green' },
  { date: '2025-03-17', name: 'Alice', zone: 'blue' },
  { date: '2025-03-17', name: 'Ben', zone: 'green' },
  { date: '2025-03-17', name: 'Charlie', zone: 'green' },
  { date: '2025-03-17', name: 'Daisy', zone: 'yellow' },
  { date: '2025-03-17', name: 'Eli', zone: 'green' },
  { date: '2025-03-18', name: 'Alice', zone: 'yellow' },
  { date: '2025-03-18', name: 'Ben', zone: 'yellow' },
  { date: '2025-03-18', name: 'Charlie', zone: 'green' },
  { date: '2025-03-18', name: 'Daisy', zone: 'green' },
  { date: '2025-03-18', name: 'Eli', zone: 'green' },
  { date: '2025-03-19', name: 'Alice', zone: 'red' },
  { date: '2025-03-19', name: 'Ben', zone: 'yellow' },
  { date: '2025-03-19', name: 'Charlie', zone: 'green' },
  { date: '2025-03-19', name: 'Daisy', zone: 'green' },
  { date: '2025-03-19', name: 'Eli', zone: 'green' },
  { date: '2025-03-20', name: 'Alice', zone: 'green' },
  { date: '2025-03-20', name: 'Ben', zone: 'blue' },
  { date: '2025-03-20', name: 'Charlie', zone: 'green' },
  { date: '2025-03-20', name: 'Daisy', zone: 'yellow' },
  { date: '2025-03-20', name: 'Eli', zone: 'green' },
];

function getLog() {
  const stored = localStorage.getItem("zoneLog-DefaultClass");
  return stored ? JSON.parse(stored) : demoLog;
}
</script>


<script>
const demoLog = [
  { date: '2025-03-11', name: 'Alice', zone: 'green' },
  { date: '2025-03-11', name: 'Ben', zone: 'red' },
  { date: '2025-03-11', name: 'Charlie', zone: 'green' },
  { date: '2025-03-11', name: 'Daisy', zone: 'red' },
  { date: '2025-03-11', name: 'Eli', zone: 'green' },
  { date: '2025-03-12', name: 'Alice', zone: 'yellow' },
  { date: '2025-03-12', name: 'Ben', zone: 'green' },
  { date: '2025-03-12', name: 'Charlie', zone: 'green' },
  { date: '2025-03-12', name: 'Daisy', zone: 'blue' },
  { date: '2025-03-12', name: 'Eli', zone: 'green' },
  { date: '2025-03-13', name: 'Alice', zone: 'green' },
  { date: '2025-03-13', name: 'Ben', zone: 'yellow' },
  { date: '2025-03-13', name: 'Charlie', zone: 'red' },
  { date: '2025-03-13', name: 'Daisy', zone: 'green' },
  { date: '2025-03-13', name: 'Eli', zone: 'yellow' },
  { date: '2025-03-14', name: 'Alice', zone: 'green' },
  { date: '2025-03-14', name: 'Ben', zone: 'green' },
  { date: '2025-03-14', name: 'Charlie', zone: 'yellow' },
  { date: '2025-03-14', name: 'Daisy', zone: 'yellow' },
  { date: '2025-03-14', name: 'Eli', zone: 'green' },
  { date: '2025-03-17', name: 'Alice', zone: 'blue' },
  { date: '2025-03-17', name: 'Ben', zone: 'green' },
  { date: '2025-03-17', name: 'Charlie', zone: 'green' },
  { date: '2025-03-17', name: 'Daisy', zone: 'yellow' },
  { date: '2025-03-17', name: 'Eli', zone: 'green' },
  { date: '2025-03-18', name: 'Alice', zone: 'yellow' },
  { date: '2025-03-18', name: 'Ben', zone: 'yellow' },
  { date: '2025-03-18', name: 'Charlie', zone: 'green' },
  { date: '2025-03-18', name: 'Daisy', zone: 'green' },
  { date: '2025-03-18', name: 'Eli', zone: 'green' },
  { date: '2025-03-19', name: 'Alice', zone: 'red' },
  { date: '2025-03-19', name: 'Ben', zone: 'yellow' },
  { date: '2025-03-19', name: 'Charlie', zone: 'green' },
  { date: '2025-03-19', name: 'Daisy', zone: 'green' },
  { date: '2025-03-19', name: 'Eli', zone: 'green' },
  { date: '2025-03-20', name: 'Alice', zone: 'green' },
  { date: '2025-03-20', name: 'Ben', zone: 'blue' },
  { date: '2025-03-20', name: 'Charlie', zone: 'green' },
  { date: '2025-03-20', name: 'Daisy', zone: 'yellow' },
  { date: '2025-03-20', name: 'Eli', zone: 'green' },
];

function getLog() {
  const stored = localStorage.getItem("zoneLog-DefaultClass");
  return stored ? JSON.parse(stored) : demoLog;
}

window.addEventListener("DOMContentLoaded", () => {
  renderDailySummary();
  renderStudentOptions();
});
</script>


<script>
let dailyChartInstance = null;
let studentChartInstance = null;

function renderDailyChart(data) {
  const labels = Object.keys(data);
  const zoneColors = { blue: '#7ec8e3', green: '#b0e57c', yellow: '#ffe066', red: '#ff6b6b' };
  const zones = ['blue', 'green', 'yellow', 'red'];

  const datasets = zones.map(zone => ({
    label: zone.charAt(0).toUpperCase() + zone.slice(1),
    data: labels.map(date => data[date][zone] || 0),
    backgroundColor: zoneColors[zone]
  }));

  const ctx = document.getElementById('dailyChart').getContext('2d');
  if (dailyChartInstance) dailyChartInstance.destroy();
  dailyChartInstance = new Chart(ctx, {
    type: 'bar',
    data: { labels, datasets },
    options: {
      responsive: true,
      plugins: {
        title: {
          display: true,
          text: 'Daily Zone Distribution'
        }
      }
    }
  });
}

function renderStudentChart(entries) {
  const grouped = {};
  entries.forEach(entry => {
    if (!grouped[entry.date]) grouped[entry.date] = [];
    grouped[entry.date].push(entry.zone);
  });

  const labels = Object.keys(grouped);
  const zoneMap = { blue: 1, green: 2, yellow: 3, red: 4 };
  const zoneColors = ['#7ec8e3', '#b0e57c', '#ffe066', '#ff6b6b'];
  const data = labels.map(date => {
    const lastZone = grouped[date][grouped[date].length - 1];
    return zoneMap[lastZone];
  });

  const ctx = document.getElementById('studentChart').getContext('2d');
  if (studentChartInstance) studentChartInstance.destroy();
  studentChartInstance = new Chart(ctx, {
    type: 'line',
    data: {
      labels,
      datasets: [{
        label: 'Zone Level (1=Blue, 4=Red)',
        data,
        backgroundColor: '#a0d2eb',
        borderColor: '#0077b6',
        tension: 0.3,
        fill: false
      }]
    },
    options: {
      scales: {
        y: {
          ticks: {
            callback: function(value) {
              const map = {1:'Blue', 2:'Green', 3:'Yellow', 4:'Red'};
              return map[value];
            },
            stepSize: 1,
            min: 1,
            max: 4
          }
        }
      },
      plugins: {
        title: {
          display: true,
          text: 'Student Zone History'
        }
      }
    }
  });
}

// Update render functions to include charts
function renderDailySummary() {
  const log = getLog();
  const summary = {};
  log.forEach(entry => {
    if (!summary[entry.date]) summary[entry.date] = { blue: 0, green: 0, yellow: 0, red: 0 };
    summary[entry.date][entry.zone]++;
  });

  const container = document.getElementById("dailySummary");
  container.innerHTML = "";
  Object.entries(summary).forEach(([date, zones]) => {
    const card = document.createElement("div");
    card.className = "zone-card";
    card.innerHTML = `
      <h3>${date}</h3>
      ğŸ”µ Blue: ${zones.blue}<br>
      ğŸŸ¢ Green: ${zones.green}<br>
      ğŸŸ¡ Yellow: ${zones.yellow}<br>
      ğŸ”´ Red: ${zones.red}
    `;
    container.appendChild(card);
  });

  renderDailyChart(summary);
}

function renderStudentLog() {
  const name = document.getElementById("studentSelect").value;
  const log = getLog().filter(entry => entry.name === name);
  const grouped = {};
  log.forEach(entry => {
    if (!grouped[entry.date]) grouped[entry.date] = [];
    grouped[entry.date].push(entry.zone);
  });
  const display = document.getElementById("studentLog");
  display.innerHTML = "";
  Object.entries(grouped).forEach(([date, zones]) => {
    const line = document.createElement("p");
    line.textContent = `${date}: ${zones.join(", ")}`;
    display.appendChild(line);
  });

  renderStudentChart(log);
}
</script>


<script>
let currentClass = "Default Class";

function getClassList() {
  return JSON.parse(localStorage.getItem("classList") || '["Default Class"]');
}

function saveClassList(classes) {
  localStorage.setItem("classList", JSON.stringify(classes));
}

function switchClass() {
  const cls = document.getElementById("classSelect").value;
  currentClass = cls;
  renderDailySummary();
  renderStudentOptions();
}

function addNewClass() {
  const newClass = document.getElementById("newClassName").value.trim();
  if (!newClass) return;
  const classes = getClassList();
  if (!classes.includes(newClass)) {
    classes.push(newClass);
    saveClassList(classes);
    populateClassDropdown(newClass);
  }
  currentClass = newClass;
  document.getElementById("newClassName").value = "";
  renderDailySummary();
  renderStudentOptions();
}

function populateClassDropdown(selected = "Default Class") {
  const classList = getClassList();
  const dropdown = document.getElementById("classSelect");
  dropdown.innerHTML = "";
  classList.forEach(cls => {
    const option = document.createElement("option");
    option.value = cls;
    option.textContent = cls;
    if (cls === selected) option.selected = true;
    dropdown.appendChild(option);
  });
}

function getLog() {
  const stored = localStorage.getItem("zoneLog-" + currentClass);
  return stored ? JSON.parse(stored) : [];
}

function exportCSV() {
  const log = getLog();
  const csv = ["Date,Student,Zone"];
  log.forEach(entry => csv.push(`${entry.date},${entry.name},${entry.zone}`));
  downloadCSV(csv.join("\n"), `${currentClass.replace(" ", "_")}_zone_log.csv`);
}

function exportStudentCSV() {
  const student = document.getElementById("studentSelect").value;
  if (!student) return alert("Select a student first.");
  const log = getLog().filter(entry => entry.name === student);
  const csv = ["Date,Student,Zone"];
  log.forEach(entry => csv.push(`${entry.date},${entry.name},${entry.zone}`));
  downloadCSV(csv.join("\n"), `${student.replace(" ", "_")}_log.csv`);
}

function downloadCSV(content, filename) {
  const blob = new Blob([content], { type: "text/csv;charset=utf-8;" });
  const url = URL.createObjectURL(blob);
  const a = document.createElement("a");
  a.setAttribute("href", url);
  a.setAttribute("download", filename);
  a.click();
}

window.addEventListener("DOMContentLoaded", () => {
  populateClassDropdown(currentClass);
});
</script>

</body>
</html>
